'use_strict';(function($){$.fn.modelo=function(options){var defaults=$.extend({top:60,maxWidth:600,centered:false,fadeDuration:600},options);return this.each(function(){var el=$(this),modal=$('[data-modal]');modalContent=$('.modal-content');width=el.width(),height=el.height(),win=$(window),body=$('body'),overlay=$('<div class="modal-overlay"></div>'),overlayClone=overlay.clone();btnOpen=$('[data-modal="open-modal"]'),btnClose=$('[data-modal="close-modal"]');el.attr('data-modal','hidden');el.css({'top':defaults.top,'max-width':defaults.maxWidth+70});modalContent.css('max-width',defaults.maxWidth);if(defaults.centered==true){el.css({'top':'50%','transform':'translate(-50%, -50%)'});} if(win.height()<height){el.css('position','absolute');} win.resize(function(){if($(this).height()<height){if(el.css('position')!=='absolute'){el.css('position','absolute');}}else{if(el.css('position')=='absolute'){el.css('position','fixed');}}});btnOpen.click(function(){openModal();});btnClose.click(function(){closeModal();});overlay.click(function(){closeModal();});function openModal(duration){if(el&&el.attr('data-modal')==='hidden'){duration=defaults.fadeDuration;body.prepend(overlay);overlay.fadeIn(duration);el.fadeIn(duration);el.attr({'aria-hidden':'false','data-modal':'active',}).css('visibility','visible');}} function closeModal(duration){if(el&&el.attr('data-modal')==='active'){duration=defaults.fadeDuration;el.fadeOut(duration);overlay.fadeOut(duration,function(){body.on('click',overlay,function(){overlayClone.detach();});});el.attr({'aria-hidden':'true','data-modal':'hidden',});}} $(document).keyup(function(event){if(event.keyCode==27){if(el&&el.attr('data-modal')==='active'){closeModal();}}});});}}(jQuery));